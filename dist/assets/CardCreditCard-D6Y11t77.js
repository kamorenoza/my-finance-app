import{e,h as a,i as l}from"./variables.styles-BivaIJLK.js";import{e as t,b as o,s as r,c as s,j as c,E as n,F as u,J as d,aa as i,z as m,K as v,u as C,H as p,_,G as f,ac as b,a9 as g,W as h}from"./vue-vendor-DpnofNfo.js";import{a as y,A as k,b as w}from"./accounts.store-B1VU2aRw.js";import{u as L}from"./useConfirm-BfXH2zKf.js";import{u as x}from"./toast.store-D86bTs2s.js";import{c as V}from"./utils-PgLBozsU.js";import{_ as j,a as E}from"./Trash.icon.vue_vue_type_script_setup_true_lang-DS7Wic85.js";import{T as S,D as T}from"./TooltipFabButton-CdK6oZVi.js";import{u as P,w as A,V as M,_ as N,o as R,a as H}from"./index-COJKv5OF.js";import{_ as D,A as I}from"./SideDrawer.vue_vue_type_style_index_0_lang-BppKQm0W.js";const B={class:"side-drawer-body"},G={class:"side-drawer-body__content"},Z={class:"side-drawer-body__actions"},F=N(t({__name:"AddAccount",props:{account:{},drawer:{type:[Boolean,Object]}},emits:["close"],setup(a,{emit:l}){const t=a,b=l,g=y(),h=x(),L=o(!1),V=o(""),j=r(k.normal),E=o(null),T=o(null),N=o(null),R=s((()=>w.filter((e=>e.type!==k.loan)))),H=s((()=>0===E.value?"":E.value||0===E.value?E.value.toLocaleString("es-CO"):"")),F=()=>{L.value=!0},U=()=>{t.account?O():$()},$=()=>{if(V.value&&j.value)if(j.value!==k.TC||E.value&&T.value&&N.value)try{const e={name:V.value,type:j.value};j.value===k.TC&&(e.creditLimit=E.value||void 0,e.cutoffDate=T.value||void 0,e.dueDate=N.value||void 0),g.addAccount(e),h.success("Cuenta creada"),K()}catch(e){h.error(e.message)}else h.error("Completa todos los campos de tarjeta de crédito")},O=()=>{if(V.value&&j.value)if(j.value!==k.TC||E.value&&T.value&&N.value)try{if(!t.account)return;const e={...t.account,name:V.value};j.value===k.TC&&(e.creditLimit=E.value||void 0,e.cutoffDate=T.value||void 0,e.dueDate=N.value||void 0),g.updateAccount(e),h.success("Cuenta editada"),K()}catch(e){h.error(e.message)}else h.error("Completa todos los campos de tarjeta de crédito")},z=e=>{const a=Number(e.replace(/[^\d]/g,""));E.value=isNaN(a)?0:a},q=e=>{const a=Number(e.replace(/[^\d]/g,""));T.value=a<1||a>31||isNaN(a)?null:a},J=e=>{const a=Number(e.replace(/[^\d]/g,""));N.value=a<1||a>31||isNaN(a)?null:a};c((()=>t.drawer),(e=>{"boolean"==typeof e?L.value=e:e&&"value"in e&&(L.value=e.value)}),{immediate:!0}),c((()=>t.account),(e=>{e?(V.value=e.name,j.value=e.type,E.value=e.creditLimit||null,T.value=e.cutoffDate||null,N.value=e.dueDate||null):(V.value="",j.value=k.normal,E.value=null,T.value=null,N.value=null)}),{immediate:!0});const K=()=>{L.value=!1,t.account?b("close"):(V.value="",j.value=k.normal,E.value=null,T.value=null,N.value=null)};return(a,l)=>(f(),n(u,null,[a.account?i("",!0):(f(),d(S,{key:0,tooltip:"Agregar cuenta",color:C(e),onClick:F},{icon:v((()=>[m(I,{class:"icon"})])),_:1},8,["color"])),m(D,{modelValue:L.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>L.value=e),l[3]||(l[3]=e=>{e||K()})],title:a.account?"Editar cuenta":"Agregar cuenta",width:380,persistent:""},{default:v((()=>[p("div",B,[p("div",G,[m(P,{class:"general-input",modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=e=>V.value=e),label:"Nombre de la cuenta*",density:"comfortable"},null,8,["modelValue"]),m(A,{modelValue:j.value,"onUpdate:modelValue":l[1]||(l[1]=e=>j.value=e),items:R.value,"item-title":"label","item-value":"type",label:"Tipo de cuenta*","return-object":!1,class:"general-input",density:"comfortable",disabled:!!a.account},null,8,["modelValue","items","disabled"]),"TC"===j.value?(f(),d(P,{key:0,ref:"valueInput",class:"general-input mb-5",density:"comfortable",label:"Cupo*","hide-details":"",type:"text",prefix:"$","onUpdate:modelValue":z,"model-value":H.value,maxlength:"12",inputmode:"numeric",pattern:"[0-9]*"},null,8,["model-value"])):i("",!0),"TC"===j.value?(f(),d(P,{key:1,ref:"valueInput",class:"general-input mb-5",density:"comfortable",label:"Fecha de Corte (día del mes)*","hide-details":"",type:"text","onUpdate:modelValue":q,"model-value":T.value,maxlength:"2",inputmode:"numeric",pattern:"[0-9]*"},null,8,["model-value"])):i("",!0),"TC"===j.value?(f(),d(P,{key:2,ref:"valueInput",class:"general-input mb-5",density:"comfortable",label:"Fecha de Pago (día del mes)*","hide-details":"",type:"text","onUpdate:modelValue":J,"model-value":N.value,maxlength:"2",inputmode:"numeric",pattern:"[0-9]*"},null,8,["model-value"])):i("",!0)]),p("div",Z,[m(M,{type:"button",class:"btn-neutro",onClick:K},{default:v((()=>l[4]||(l[4]=[_("Cancelar")]))),_:1}),m(M,{type:"button",class:"btn-primary",onClick:U,disabled:!V.value?.trim()},{default:v((()=>l[5]||(l[5]=[_(" Guardar ")]))),_:1},8,["disabled"])])])])),_:1},8,["modelValue","title"])],64))}}),[["__scopeId","data-v-8e87dc8c"]]),U={class:"icon",viewBox:"-2.4 -2.4 28.80 28.80",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#c0dedc","stroke-width":"0.40800000000000003"},$={id:"SVGRepo_iconCarrier"},O=["fill"],z=t({__name:"Suitcase.icon",props:{color:{default:()=>a}},setup:e=>(e,a)=>(f(),n("svg",U,[a[0]||(a[0]=p("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1)),a[1]||(a[1]=p("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round",stroke:"#CCCCCC","stroke-width":"0.8640000000000001"},null,-1)),p("g",$,[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5814 1.25L10.561 1.25C10.4474 1.24998 10.3591 1.24997 10.2755 1.25503C9.21507 1.31926 8.28648 1.98855 7.89021 2.97425C7.85898 3.05196 7.83104 3.1358 7.79516 3.24351L7.78872 3.26283L7.76306 3.33981C7.74407 3.39678 7.73878 3.41248 7.73417 3.4252C7.5743 3.86717 7.04303 4.236 6.481 4.25024L4.6616 4.33925C3.87537 4.43163 3.20216 4.62833 2.63325 5.09123C2.43454 5.25291 2.25292 5.43454 2.09123 5.63325C1.62833 6.20216 1.43163 6.87537 1.33925 7.6616C1.24998 8.42138 1.24999 9.37673 1.25 10.5617L1.25 10.6089L1.25 10.6402C1.24997 10.9241 1.24994 11.1903 1.27268 11.4144C1.29784 11.6624 1.35574 11.9257 1.51386 12.18C1.56526 12.2627 1.62347 12.3409 1.68788 12.4139C1.85699 12.6055 2.05339 12.7291 2.25048 12.8205C2.25336 14.4357 2.27381 16.0682 2.41875 17.4664C2.50368 18.2856 2.63401 19.0548 2.84074 19.7106C3.04411 20.3557 3.34441 20.9665 3.81975 21.389C4.64319 22.1209 5.67956 22.4436 6.97328 22.5983C8.2432 22.75 9.87087 22.75 11.9488 22.75H12.0512C14.1291 22.75 15.7568 22.75 17.0267 22.5983C18.3204 22.4436 19.3568 22.1209 20.1803 21.389C20.6556 20.9665 20.9559 20.3557 21.1593 19.7106C21.366 19.0548 21.4963 18.2856 21.5813 17.4664C21.7262 16.0682 21.7466 14.4357 21.7495 12.8205C21.9466 12.7291 22.143 12.6055 22.3121 12.4139C22.3765 12.3409 22.4347 12.2627 22.4861 12.18C22.6443 11.9257 22.7022 11.6624 22.7273 11.4144C22.7501 11.1903 22.75 10.9241 22.75 10.6402L22.75 10.5616C22.75 9.37672 22.75 8.42138 22.6608 7.6616C22.5684 6.87537 22.3717 6.20216 21.9088 5.63325C21.7471 5.43454 21.5655 5.25291 21.3668 5.09123C20.7978 4.62833 20.1246 4.43163 19.3384 4.33925L17.519 4.25024C16.9572 4.23601 16.4262 3.86731 16.2663 3.42518C16.2617 3.41254 16.2563 3.39649 16.2374 3.33981L16.2053 3.24347C16.1694 3.13578 16.1415 3.05195 16.1102 2.97426C15.714 1.98855 14.7854 1.31926 13.725 1.25503C13.6414 1.24997 13.553 1.24998 13.4395 1.25L10.5814 1.25ZM7.57032 5.75L7.60893 5.75H16.3911L16.4297 5.75C17.6524 5.75004 18.5082 5.75202 19.1634 5.829C19.809 5.90486 20.1619 6.04466 20.4201 6.25474C20.5393 6.35175 20.6483 6.46072 20.7453 6.57995C20.9553 6.83814 21.0951 7.19102 21.171 7.83664C21.2488 8.49864 21.25 9.3656 21.25 10.6089C21.25 10.935 21.2491 11.1238 21.235 11.263C21.2266 11.3452 21.2161 11.3786 21.2122 11.3882C21.2049 11.3999 21.1967 11.4109 21.1876 11.4212C21.1795 11.4277 21.1506 11.4474 21.0742 11.479C20.945 11.5326 20.7644 11.5877 20.4521 11.6814L15.25 13.242V13C15.25 12.3096 14.6904 11.75 14 11.75H10C9.30965 11.75 8.75 12.3096 8.75 13V13.242L3.54792 11.6814C3.23557 11.5877 3.05502 11.5326 2.92578 11.479C2.84942 11.4474 2.82047 11.4277 2.81236 11.4212L8.75 13.242L2.78785 11.3882C2.78391 11.3786 2.77336 11.3452 2.76502 11.263C2.7509 11.1238 2.75 10.935 2.75 10.6089C2.75 9.3656 2.75122 8.49864 2.829 7.83664C2.90487 7.19102 3.04466 6.83814 3.25474 6.57995C3.35175 6.46072 3.46072 6.35175 3.57995 6.25474C3.83814 6.04466 4.19102 5.90486 4.83665 5.829C5.49176 5.75202 6.34762 5.75004 7.57032 5.75ZM10.5814 2.75C10.438 2.75 10.3984 2.75034 10.3662 2.75229C9.88417 2.78148 9.46208 3.08571 9.28196 3.53375C9.26991 3.56374 9.25708 3.60117 9.21174 3.73717L9.18338 3.82225C9.16835 3.86736 9.15665 3.90246 9.14472 3.93544C9.10527 4.04452 9.05863 4.14944 9.00558 4.25H14.9949C14.9418 4.14945 14.8952 4.04453 14.8557 3.93547C14.8438 3.90249 14.8321 3.86736 14.8171 3.82225L14.7887 3.73717C14.7434 3.60117 14.7305 3.56374 14.7185 3.53375C14.5384 3.08571 14.1163 2.78148 13.6343 2.75229C13.602 2.75034 13.5625 2.75 13.4191 2.75H10.5814ZM3.7521 13.3087C3.7589 14.7455 3.78782 16.1259 3.91076 17.3118C3.99059 18.0818 4.10738 18.7394 4.27134 19.2596C4.43867 19.7904 4.63263 20.1046 4.8163 20.2679C5.31088 20.7075 5.99418 20.9706 7.15128 21.1089C8.32178 21.2487 9.85979 21.25 12 21.25C14.1402 21.25 15.6782 21.2487 16.8487 21.1089C18.0058 20.9706 18.6891 20.7075 19.1837 20.2679C19.3674 20.1046 19.5613 19.7904 19.7287 19.2596C19.8926 18.7394 20.0094 18.0818 20.0892 17.3118C20.2122 16.1259 20.2411 14.7455 20.2479 13.3087L15.25 14.808V15.1615C15.25 15.6726 14.9388 16.1323 14.4642 16.3221L13.7641 16.6021C12.6317 17.0551 11.3684 17.0551 10.2359 16.6021L9.53577 16.3221C9.06119 16.1323 8.75 15.6726 8.75 15.1615V14.808L3.7521 13.3087ZM10.25 13.25V14.9922L10.793 15.2094C11.5678 15.5194 12.4322 15.5194 13.207 15.2094L13.75 14.9922V13.25H10.25Z",fill:e.color},null,8,O)])]))}),q={class:"normal-card__container"},J={class:"normal-card__header"},K={class:"normal-card__icon"},W={class:"normal-card__title"},Q={class:"normal-card__type"},X={class:"normal-card__balance"},Y={class:"normal-card__value"},ee={class:"normal-card__fixed"},ae={class:"normal-card__fixed-label"},le={key:0,class:"normal-card__actions"},te={class:"normal-card__menu"},oe=N(t({__name:"NormalCard",props:{account:{},fromPreview:{type:Boolean}},setup(e){const a=[{label:"Editar",id:1,icon:j},{label:"Eliminar",id:2,icon:E}],l=e,t=g(),r=L(),c=y(),d=x(),C=o(!1),w=s((()=>{let e=0;return(l.account.expenses??[]).forEach((a=>{a.isPending||("ingreso"===a.type?e+=a.value:e-=a.value)})),V(e)})),S=s((()=>{let e=0;return(l.account.expenses??[]).forEach((a=>{"ingreso"===a.type?e+=a.value:e-=a.value})),V(e)})),P=s((()=>l.account.type===k.normal?"Ahorros":l.account.type===k.TC?"Tarjeta de crédito":"Préstamo")),A=()=>{l.fromPreview||t.push({name:"cuentas-detalle",params:{id:l.account.id}})},M=e=>{1===e?N():2===e&&I()},N=()=>{C.value=!0},D=()=>{C.value=!1},I=async()=>{await r({title:"Eliminar cuenta",message:`Se eliminará la cuenta <strong>${l.account.name}</strong> y toda su información, <strong>este proceso es IRREVERSIBLE</strong> ¿Está seguro?`,confirmColor:"red"})&&(c.deleteAccount(l.account),d.success("Cuenta eliminada"),t.push({name:"cuentas"}))};return(e,l)=>(f(),n(u,null,[p("div",q,[m(R,{class:b(["normal-card",{"no-click":e.fromPreview}]),onClick:A},{default:v((()=>[p("div",J,[p("div",K,[m(z)]),p("div",null,[p("h3",W,h(e.account.name),1),p("p",Q,h(P.value),1)])]),p("div",X,[l[0]||(l[0]=p("div",{class:"normal-card__label"},"Saldo",-1)),p("div",Y,h(w.value),1)]),p("div",ee,[l[1]||(l[1]=p("span",{class:"normal-card__label"},"Saldo real",-1)),p("span",ae,h(S.value),1)]),e.fromPreview?(f(),n("div",le,[m(T,{items:a,onOnMenuClicked:M},{default:v((()=>[p("div",te,[m(H,null,{default:v((()=>l[2]||(l[2]=[_("mdi-dots-horizontal")]))),_:1})])])),_:1})])):i("",!0)])),_:1},8,["class"])]),m(F,{account:e.account,drawer:C.value,onClose:D},null,8,["account","drawer"])],64))}}),[["__scopeId","data-v-be12fcb1"]]),re={width:"186px",height:"186px",viewBox:"0 0 24.00 24.00",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#c9c9c9",class:"icon"},se={id:"SVGRepo_iconCarrier"},ce=["stroke"],ne=["stroke"],ue=["stroke"],de=["stroke"],ie=["stroke"],me=t({__name:"CreditCard.icon",props:{color:{default:()=>l}},setup:e=>(e,a)=>(f(),n("svg",re,[a[0]||(a[0]=p("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1)),a[1]||(a[1]=p("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),p("g",se,[p("path",{d:"M2 12C2 8.22876 2 6.34315 3.17157 5.17157C4.34315 4 6.22876 4 10 4H14C17.7712 4 19.6569 4 20.8284 5.17157C22 6.34315 22 8.22876 22 12C22 15.7712 22 17.6569 20.8284 18.8284C19.6569 20 17.7712 20 14 20H10C6.22876 20 4.34315 20 3.17157 18.8284C2 17.6569 2 15.7712 2 12Z",stroke:e.color,"stroke-width":"0.648"},null,8,ce),p("path",{d:"M10 16.5H6",stroke:e.color,"stroke-width":"0.648","stroke-linecap":"round"},null,8,ne),p("path",{d:"M8 13.5H6",stroke:e.color,"stroke-width":"0.648","stroke-linecap":"round"},null,8,ue),p("path",{d:"M2 10L22 10",stroke:e.color,"stroke-width":"0.648","stroke-linecap":"round"},null,8,de),p("path",{d:"M14 15C14 14.0572 14 13.5858 14.2929 13.2929C14.5858 13 15.0572 13 16 13C16.9428 13 17.4142 13 17.7071 13.2929C18 13.5858 18 14.0572 18 15C18 15.9428 18 16.4142 17.7071 16.7071C17.4142 17 16.9428 17 16 17C15.0572 17 14.5858 17 14.2929 16.7071C14 16.4142 14 15.9428 14 15Z",stroke:e.color,"stroke-width":"0.648"},null,8,ie)])]))}),ve={class:"credit-card__container"},Ce={class:"credit-card__header"},pe={class:"credit-card__icon"},_e={class:"credit-card__title"},fe={class:"credit-card__type"},be={class:"credit-card__balance"},ge={class:"credit-card__value"},he={class:"credit-card__fixed"},ye={class:"credit-card__fixed-label"},ke={class:"d-flex justify-end mt-1"},we={class:"credit-card__fixed"},Le={class:"credit-card__fixed-label"},xe={key:0,class:"credit-card__actions"},Ve={class:"credit-card__menu"},je={key:0,class:"credit-card__info"},Ee=N(t({__name:"CardCreditCard",props:{account:{},fromPreview:{type:Boolean}},setup(e){const a=e,l=g(),t=L(),r=y(),c=x(),d=o(!1),C=[{label:"Editar",id:1,icon:j},{label:"Eliminar",id:2,icon:E}],w=s((()=>V(a.account.creditLimit||0))),S=s((()=>a.account.type===k.normal?"Ahorros":a.account.type===k.TC?"Tarjeta de crédito":"Préstamo")),P=s((()=>{if(!a.account.expenses||0===a.account.expenses.length)return"$ 0";const e=a.account.expenses.reduce(((e,a)=>{const l=Number(a.value)||0;return"ingreso"===a.type?e+l:e-l}),0);return V(Math.abs(e))||"$ 0"})),A=s((()=>{const e=a.account.expenses?.reduce(((e,a)=>"ingreso"===a.type?e+a.value:e-a.value),0),l=a.account.creditLimit?a.account.creditLimit+(e||0):0;return V(l)})),M=()=>{a.fromPreview||l.push({name:"cuentas-detalle",params:{id:a.account.id}})},N=e=>{1===e?D():2===e&&B()},D=()=>{d.value=!0},I=()=>{d.value=!1},B=async()=>{await t({title:"Eliminar cuenta",message:`Se eliminará la cuenta <strong>${a.account.name}</strong> y toda su información, <strong>este proceso es IRREVERSIBLE</strong> ¿Está seguro?`,confirmColor:"red"})&&(r.deleteAccount(a.account),c.success("Cuenta eliminada"),l.push({name:"cuentas"}))};return(e,a)=>(f(),n(u,null,[p("div",ve,[m(R,{class:b(["credit-card",{"no-click":e.fromPreview}]),onClick:M},{default:v((()=>[p("div",Ce,[p("div",pe,[m(me)]),p("div",null,[p("h3",_e,h(e.account.name),1),p("p",fe,h(S.value),1)])]),p("div",be,[a[0]||(a[0]=p("div",{class:"credit-card__label"},"Saldo",-1)),p("div",ge,h(P.value),1)]),p("div",he,[a[1]||(a[1]=p("span",{class:"credit-card__label"},"Libre",-1)),p("span",ye,h(A.value),1)]),p("div",ke,[p("div",we,[a[2]||(a[2]=p("span",{class:"credit-card__label"},"Cupo",-1)),p("span",Le,h(w.value),1)])]),e.fromPreview?(f(),n("div",xe,[m(T,{items:C,onOnMenuClicked:N},{default:v((()=>[p("div",Ve,[m(H,null,{default:v((()=>a[3]||(a[3]=[_("mdi-dots-horizontal")]))),_:1})])])),_:1})])):i("",!0)])),_:1},8,["class"])]),e.fromPreview?(f(),n("div",je,[p("div",null,[p("p",null,[a[4]||(a[4]=_(" Fecha de corte: ")),p("span",null,h(e.account.cutoffDate),1)]),p("p",null,[a[5]||(a[5]=_(" Fecha de Pago: ")),p("span",null,h(e.account.dueDate),1)])])])):i("",!0),m(F,{account:e.account,drawer:d.value,onClose:I},null,8,["account","drawer"])],64))}}),[["__scopeId","data-v-7889887c"]]);export{F as A,Ee as C,oe as N};
