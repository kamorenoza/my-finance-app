import{_ as e}from"./Filter.icon.vue_vue_type_script_setup_true_lang-BzGB1Xxc.js";import{D as l,_ as a}from"./DateSelector-CQDIr8KZ.js";import{y as t,u as i,w as o,l as s,V as r,_ as u}from"./index-B8_2VSAt.js";import{e as n,b as d,c as p,l as c,$ as v,j as m,E as y,H as b,z as f,ae as _,K as h,aa as V,J as g,_ as B,A as w,G as C}from"./vue-vendor-CQiCTXSV.js";const O={class:"search-filter"},D={class:"search-filter__search"},F={class:"search-filter__filters"},U={key:0},j={key:1,class:"mt-3 mb-3"},k={class:"collapse-toggle"},A={class:"search-filter__actions"},G=u(n({__name:"SearchOrderFilter",props:{initialGroupBy:{default:"category"},initialOrderBy:{default:null},groupByOptions:{},orderByOptions:{},searchLabel:{default:"Buscar por nombre"},entityId:{default:null},hideDateFilter:{type:Boolean},initialCollapseAll:{type:Boolean,default:!1}},emits:["filterChange"],setup(u,{emit:n}){const G=[{label:"No agrupar",type:"none"},{label:"Ingreso/Gasto",type:"type"},{label:"Categoría",type:"category"},{label:"Fecha",type:"date"}],L=[{label:"Más reciente",filter:"newest"},{label:"Más antiguo",filter:"oldest"},{label:"Mayor monto",filter:"highest"},{label:"Menor monto",filter:"lowest"}],z=u,M=n,E=d(!1),I=d(""),S=d(z.initialGroupBy),x=d(z.initialOrderBy),W=d(null),$=d(null),H=d(z.initialCollapseAll),J=d(window.innerWidth),K=p((()=>z.groupByOptions||G)),N=p((()=>z.orderByOptions||L));c((()=>{window.addEventListener("resize",q)})),v((()=>{window.removeEventListener("resize",q)})),m((()=>z.initialGroupBy),(e=>{S.value=e})),m((()=>z.initialOrderBy),(e=>{x.value=e})),m((()=>z.initialCollapseAll),(e=>{H.value=e}));const q=()=>{J.value=window.innerWidth};return m([I,S,x,W,$,H],(()=>{const e={search:I.value,groupBy:S.value,orderBy:x.value,initDate:W.value,endDate:$.value,collapseAll:H.value};M("filterChange",e)})),(u,n)=>(C(),y("div",O,[b("div",D,[f(t,{modelValue:E.value,"onUpdate:modelValue":n[7]||(n[7]=e=>E.value=e),"close-on-content-click":!1},{activator:h((({props:l})=>[b("div",w({class:"search-filter__icon"},l),[f(e)],16)])),default:h((()=>[b("div",F,[f(o,{modelValue:S.value,"onUpdate:modelValue":n[0]||(n[0]=e=>S.value=e),items:K.value,"item-title":"label","item-value":"type",label:"Agrupar por","return-object":!1,class:"general-input",density:"comfortable"},null,8,["modelValue","items"]),f(o,{modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=e=>x.value=e),items:N.value,"item-title":"label","item-value":"filter",label:"Ordenar por",class:"general-input",density:"comfortable"},null,8,["modelValue","items"]),z.hideDateFilter?V("",!0):(C(),y("p",U,"Filtrar por fechas")),z.hideDateFilter?V("",!0):(C(),y("div",j,[f(l,{modelValue:W.value,"onUpdate:modelValue":n[2]||(n[2]=e=>W.value=e),"empty-date":!0},null,8,["modelValue"])])),z.hideDateFilter?V("",!0):(C(),g(l,{key:2,modelValue:$.value,"onUpdate:modelValue":n[3]||(n[3]=e=>$.value=e),"empty-date":!0},null,8,["modelValue"])),b("div",k,[f(s,{modelValue:H.value,"onUpdate:modelValue":n[4]||(n[4]=e=>H.value=e),label:"Collapsar todo",inset:"",density:"compact","hide-details":"",color:H.value?"success":void 0,class:"ma-0 pa-0"},null,8,["modelValue","color"])]),b("div",A,[f(r,{onClick:n[5]||(n[5]=e=>E.value=!1),type:"button",class:"btn-label"},{default:h((()=>n[9]||(n[9]=[B(" Cerrar ")]))),_:1}),f(r,{onClick:n[6]||(n[6]=e=>(E.value=!1,I.value="",S.value=z.initialGroupBy||"category",x.value=z.initialOrderBy||null,W.value=null,$.value=null,void(H.value=!1))),type:"button",class:"btn-label primary"},{default:h((()=>n[10]||(n[10]=[B(" Limpiar ")]))),_:1})])])])),_:1},8,["modelValue"]),f(i,{class:"search-input",modelValue:I.value,"onUpdate:modelValue":n[8]||(n[8]=e=>I.value=e),label:u.searchLabel,density:"compact"},{prepend:h((()=>[f(a)])),_:1},8,["modelValue","label"]),_(u.$slots,"actions",{},void 0,!0)])]))}}),[["__scopeId","data-v-ec5839f2"]]);export{G as S};
