import{E as e,M as a}from"./ExpenseItem-DdZjBevW.js";import{C as t}from"./CategoryManager-BwoP3R4Y.js";import{useBudgetStore as l}from"./budget.store-CqlsSnB8.js";import{g as s,r as o,d as n,a as r,e as d}from"./variables.styles-BivaIJLK.js";import{e as u,E as i,H as c,G as p,c as m,z as v,W as g,u as y,ac as f,A as _,J as b,V as h,K as k,ae as x,_ as C,aa as D,a1 as E,N as w,L as V,M as B,F as M,ab as P,b as T,l as S,j as Y,af as j,ad as U}from"./vue-vendor-DpnofNfo.js";import{_ as I,j as F,k as G,V as A,a as O,l as $,m as N,n as R,o as L,p as H,q as z,r as Z,s as q,t as J,u as K,d as W,v as Q,w as X,x as ee}from"./index-kUCeoXe8.js";import{c as ae}from"./config.service-BNV0N1DJ.js";import{useExpensesStore as te}from"./expenses.store-YFn4EKUG.js";import{E as le}from"./EmptyState-DmADnuFN.js";import{g as se}from"./TooltipFabButton-B68_Oztn.js";import{u as oe}from"./useConfirm-DwzhtzI4.js";import{d as ne,g as re}from"./utils-CfCBEYwL.js";import{S as de}from"./SearchOrderFilter-DoOmB-dU.js";import{P as ue}from"./PageHeader-BCBBA5by.js";import{u as ie}from"./toast.store-D86bTs2s.js";import{useCategoryStore as ce}from"./categories.store-CUFfxfWp.js";import{D as pe}from"./DateSelector-aV-IP_rm.js";import{A as me,_ as ve}from"./SideDrawer.vue_vue_type_style_index_0_lang-CbuBtalK.js";import{$ as ge}from"./vuetify-vendor-BWjtgv5e.js";import"./accounts.store-BzaUBVst.js";import"./Trash.icon.vue_vue_type_script_setup_true_lang-DS7Wic85.js";import"./Check.icon-YXoriN3Y.js";import"./Close.icon-BhKqQU16.js";import"./firebase-vendor-B7qOPrSY.js";import"./Filter.icon.vue_vue_type_script_setup_true_lang-B34yG760.js";const ye={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"icon"},fe={id:"SVGRepo_iconCarrier"},_e=["stroke"],be=["stroke"],he=["stroke"],ke=["stroke"],xe=["stroke"],Ce=u({__name:"Income.icon",props:{color:{default:()=>s}},setup:e=>(e,a)=>(p(),i("svg",ye,[a[0]||(a[0]=c("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1)),a[1]||(a[1]=c("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),c("g",fe,[c("path",{d:"M12 14.5C13.3807 14.5 14.5 13.3807 14.5 12C14.5 10.6193 13.3807 9.5 12 9.5C10.6193 9.5 9.5 10.6193 9.5 12C9.5 13.3807 10.6193 14.5 12 14.5Z",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,_e),c("path",{d:"M18.5 9.5V14.5",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,be),c("path",{d:"M9 18C9 18.75 8.79001 19.46 8.42001 20.06C7.73001 21.22 6.46 22 5 22C3.54 22 2.26999 21.22 1.57999 20.06C1.20999 19.46 1 18.75 1 18C1 15.79 2.79 14 5 14C7.21 14 9 15.79 9 18Z",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,he),c("path",{d:"M3.44141 17.9995L4.4314 18.9895L6.5614 17.0195",stroke:e.color,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ke),c("path",{d:"M2 15.3V9C2 5.5 4 4 7 4H17C20 4 22 5.5 22 9V15C22 18.5 20 20 17 20H8.5",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,xe)])]))}),De={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"icon"},Ee={id:"SVGRepo_iconCarrier"},we=["stroke"],Ve=["stroke"],Be=["stroke"],Me=["stroke"],Pe=["stroke"],Te=["stroke"],Se=["stroke"],Ye=u({__name:"Expense.icon",props:{color:{default:()=>o}},setup:e=>(e,a)=>(p(),i("svg",De,[a[0]||(a[0]=c("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1)),a[1]||(a[1]=c("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),c("g",Ee,[c("path",{d:"M2 11V9C2 5.5 4 4 7 4H17C20 4 22 5.5 22 9V15C22 18.5 20 20 17 20H12",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,we),c("path",{d:"M12 14.5C13.3807 14.5 14.5 13.3807 14.5 12C14.5 10.6193 13.3807 9.5 12 9.5C10.6193 9.5 9.5 10.6193 9.5 12C9.5 13.3807 10.6193 14.5 12 14.5Z",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Ve),c("path",{d:"M18.5 9.5V14.5",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Be),c("path",{d:"M2 15.5H7.34003C7.98003 15.5 8.5 16.02 8.5 16.66V17.94",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Me),c("path",{d:"M3.21997 14.28L2 15.5L3.21997 16.72",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Pe),c("path",{d:"M8.5 20.7801H3.15997C2.51997 20.7801 2 20.2601 2 19.6201V18.3401",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Te),c("path",{d:"M7.28125 22.0003L8.50122 20.7803L7.28125 19.5603",stroke:e.color,"stroke-width":"1.2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Se)])]))}),je={viewBox:"0 -0.55 46.439 46.439",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",class:"icon"},Ue={id:"SVGRepo_iconCarrier"},Ie={transform:"translate(-824.507 -32.514)"},Fe=["stroke"],Ge=["stroke"],Ae=["stroke"],Oe=["stroke"],$e=["stroke"],Ne=["stroke"],Re=["stroke"],Le=["stroke"],He=u({__name:"Balance.icon",props:{color:{default:()=>n}},setup:e=>(e,a)=>(p(),i("svg",je,[a[0]||(a[0]=c("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1)),a[1]||(a[1]=c("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),c("g",Ue,[c("g",Ie,[c("path",{d:"M849.477,73.36h-3V34.831a1.644,1.644,0,0,1,1.6-1.817h-.209a1.65,1.65,0,0,1,1.609,1.817Z",fill:"none",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,Fe),c("line",{x2:"12",transform:"translate(833.477 40.36)","stroke-width":"1.5",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,8,Ge),c("line",{x2:"11",transform:"translate(850.477 40.36)","stroke-width":"1.5",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,8,Ae),c("path",{d:"M834,73.36h27.727c.346,0,.753.781.753,1.161V76.4c0,.38-.407.96-.753.96H834c-.347,0-.52-.58-.52-.96V74.521C833.477,74.141,833.65,73.36,834,73.36Z",fill:"none",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,Oe),c("path",{d:"M825.164,59.36l8.188-19,6.438,19",fill:"none",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,$e),c("path",{d:"M832.477,66.3a7.024,7.024,0,0,0,7.312-6.936H825.164A7.025,7.025,0,0,0,832.477,66.3Z",fill:"none",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,Ne),c("path",{d:"M870.289,59.36l-8.187-19-6.437,19",fill:"none",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,Re),c("path",{d:"M862.977,66.3a7.025,7.025,0,0,1-7.313-6.936h14.625A7.024,7.024,0,0,1,862.977,66.3Z",fill:"none",stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,Le)])])]))}),ze={class:"budget-summary"},Ze={class:"budget-summary__card"},qe={class:"budget-summary__header"},Je={class:"budget-summary__section"},Ke={class:"budget-summary__label"},We={class:"budget-summary__amount"},Qe={class:"budget-summary__section-normal"},Xe={class:"budget-summary__amount"},ea={class:"budget-summary__card expense"},aa={class:"budget-summary__header"},ta={class:"budget-summary__section"},la={class:"budget-summary__label"},sa={class:"budget-summary__amount"},oa={class:"budget-summary__section-normal"},na={class:"budget-summary__amount"},ra={class:"budget-summary__card balance"},da={class:"budget-summary__header"},ua={class:"budget-summary__section"},ia={class:"budget-summary__label"},ca={class:"budget-summary__amount"},pa={class:"budget-summary__section-normal"},ma={class:"budget-summary__amount"},va=I(u({__name:"BudgetSummary",props:{budgetToggle:{default:"budget"},filteredEntries:{default:()=>[]},selectedDate:{default:()=>new Date}},setup(e){const a=l(),t=e,s=m((()=>"real"===t.budgetToggle?a.totalIncomesReal:a.totalIncomesBudget)),o=m((()=>"real"===t.budgetToggle?a.totalExpensesReal:a.totalExpensesBudget)),n=m((()=>s.value-o.value)),r=m((()=>a.totalIncomesReal-a.totalExpensesReal)),d=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e);return(e,l)=>(p(),i("div",ze,[c("div",Ze,[c("div",qe,[v(Ce),l[0]||(l[0]=c("div",{class:"label"},"Ingresos",-1))]),c("div",Je,[c("p",Ke,g("real"===t.budgetToggle?"Real":"Presupuestado"),1),c("p",We,g(d(s.value)),1)]),c("div",Qe,[l[1]||(l[1]=c("p",{class:"budget-summary__label"},"Real",-1)),c("div",Xe,g(d(y(a).totalIncomesReal)),1)])]),c("div",ea,[c("div",aa,[v(Ye),l[2]||(l[2]=c("div",{class:"label"},"Gastos",-1))]),c("div",ta,[c("p",la,g("real"===t.budgetToggle?"Real":"Presupuestado"),1),c("p",sa,g(d(o.value)),1)]),c("div",oa,[l[3]||(l[3]=c("p",{class:"budget-summary__label"},"Real",-1)),c("div",na,g(d(y(a).totalExpensesReal)),1)])]),c("div",ra,[c("div",da,[v(He),l[4]||(l[4]=c("div",{class:"label"},"Balance",-1))]),c("div",ua,[c("p",ia,g("real"===t.budgetToggle?"Real":"Presupuestado"),1),c("p",ca,g(d(n.value)),1)]),c("div",pa,[l[5]||(l[5]=c("p",{class:"budget-summary__label"},"Real",-1)),c("div",ma,g(d(r.value)),1)])])]))}}),[["__scopeId","data-v-d64e2451"]]),ga={class:"budget-toggle"},ya=I(u({__name:"BudgetToggle",props:{modelValue:{type:String,default:"budget"}},emits:["update:modelValue"],setup(e,{emit:a}){const t=a,l=e=>{t("update:modelValue",e)};return(a,t)=>(p(),i("div",ga,[c("div",{class:f(["budget-toggle__indicator",{right:"real"===e.modelValue}])},null,2),c("button",{class:f(["budget-toggle__option",{active:"budget"===e.modelValue}]),onClick:t[0]||(t[0]=e=>l("budget"))}," Presupuestado ",2),c("button",{class:f(["budget-toggle__option",{active:"real"===e.modelValue}]),onClick:t[1]||(t[1]=e=>l("real"))}," Real ",2)]))}}),[["__scopeId","data-v-14e7ce2c"]]);var fa,_a={exports:{}};const ba=F(fa?_a.exports:(fa=1,_a.exports=function(e,a){a.prototype.isSameOrAfter=function(e,a){return this.isSame(e,a)||this.isAfter(e,a)}}));var ha,ka={exports:{}};const xa=F(ha?ka.exports:(ha=1,ka.exports=function(e,a){a.prototype.isSameOrBefore=function(e,a){return this.isSame(e,a)||this.isBefore(e,a)}}));function Ca(e={}){const a=l();return{filteredAndSortedEntries:m((()=>{const t=y(e.selectedDate)||new Date,l=y(e.search)||"",s=y(e.initDate),o=y(e.endDate),n=G(t);let r=[];if(a.entries.forEach((e=>{const a=G(e.date);let t=!1;if(!0===e.isFixed)t=n.isSameOrAfter(a,"month");else if(e.repeat&&e.repeat>0){const l=a.add(e.repeat-1,"months");t=n.isSameOrAfter(a,"month")&&n.isSameOrBefore(l,"month")}else t=n.isSame(a,"month");t&&r.push(e)})),l){const e=l.toLowerCase();r=r.filter((a=>{const l=((e,a)=>{const t=G(a).format("YYYY-MM"),l=e.modifications?.find((e=>e.month===t));return l&&void 0!==l.name?l.name:e.name})(a,t);return l.toLowerCase().includes(e)||a.category?.name?.toLowerCase().includes(e)}))}return s&&(r=r.filter((e=>G(e.date).isSameOrAfter(G(s),"day")))),o&&(r=r.filter((e=>G(e.date).isSameOrBefore(G(o),"day")))),r}))}}G.extend(ba),G.extend(xa);const Da={class:"budget-item__content"},Ea={class:"budget-item__info"},wa={class:"budget-item__header"},Va={class:"budget-item__name"},Ba={class:"budget-item__date"},Ma={class:"budget-item__comments"},Pa={class:"budget-item__actions"},Ta=I(u({__name:"BudgetItem",props:{entry:{},referenceDate:{default:()=>new Date}},emits:["edit"],setup(e,{emit:a}){const t=e,s=a,o=l(),n=oe(),d=m((()=>{const e=G(t.referenceDate).format("YYYY-MM"),a=t.entry.modifications?.find((a=>a.month===e));return a&&void 0!==a.value?a.value:t.entry.value})),u=m((()=>{const e=G(t.referenceDate).format("YYYY-MM"),a=t.entry.modifications?.find((a=>a.month===e));return a&&void 0!==a.name?a.name:t.entry.name})),D=m((()=>{const e=G(t.referenceDate).format("YYYY-MM"),a=t.entry.modifications?.find((a=>a.month===e));return a&&void 0!==a.isPaid?a.isPaid:t.entry.isPaid})),E=m((()=>{const e=G(t.entry.date).date();return G(t.referenceDate).date(e).format("D MMM YYYY")})),w=()=>{s("edit",t.entry)},V=async()=>{const e=!D.value,a=e?"pagado":"pendiente";await n({title:`Marcar como ${a}`,message:`¿Deseas marcar este movimiento como ${a}?`})&&o.updateEntryIsPaidForMonth(t.entry.id,e)};return(e,a)=>{return p(),i("div",{class:f(["budget-item",{paid:D.value}])},[c("div",null,[c("div",_(t,{icon:"",class:"budget-item__category",style:{backgroundColor:e.entry?.category?.backgroundColor||"#9e9e9e"}}),[(p(),b(h(y(se)(e.entry.category?.icon||"")),{color:y(r)},null,8,["color"]))],16)]),c("div",Da,[c("div",Ea,[c("div",wa,[c("p",Va,g(u.value),1),D.value?(p(),i("span",{key:0,class:"badge paid",onClick:V},"Pagado")):(p(),i("span",{key:1,class:"badge pending",onClick:V},"Pendiente"))]),c("p",Ba,g(E.value),1),c("p",Ma,g(e.entry.comments),1)]),c("div",null,[c("div",{class:f(["budget-item__amount",e.entry.type])},g((l=d.value,new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(l))),3)])]),c("div",Pa,[v(A,_({icon:"",variant:"plain"},t,{ripple:!1,class:"btn-label budget-item__edit",onClick:w}),{default:k((()=>[x(e.$slots,"default",{},(()=>[v(O,{size:"24"},{default:k((()=>a[0]||(a[0]=[C("mdi-chevron-right")]))),_:1})]),!0)])),_:3},16)])],2);var l}}}),[["__scopeId","data-v-a09998aa"]]),Sa={key:0,class:"month-expenses-group"},Ya={class:"budget-group__header-content"},ja={class:"budget-group__chevron"},Ua={class:"budget-group__total"},Ia={class:"month-expenses-content"},Fa={class:"month-expenses-list"},Ga=I(u({__name:"BudgetMonthExpenses",props:{expenses:{},total:{},addExpensesToBudget:{type:Boolean},isExpanded:{type:Boolean}},emits:["toggleGroup","update:addExpensesToBudget"],setup:a=>(a,t)=>{return a.expenses.length>0?(p(),i("div",Sa,[c("p",{class:"budget-group__header budget-group__header--expenses mb-0",onClick:t[2]||(t[2]=e=>a.$emit("toggleGroup","gastos-del-mes"))},[c("span",{class:"month-expenses-toggle",onClick:t[1]||(t[1]=E((()=>{}),["stop"]))},[v($,{"model-value":a.addExpensesToBudget,color:"success","hide-details":"",density:"compact",inset:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.$emit("update:addExpensesToBudget",!!e))},null,8,["model-value"])]),c("span",Ya,[t[3]||(t[3]=c("span",null,"Gastos del mes",-1)),c("span",ja,[v(O,{size:"17"},{default:k((()=>[C(g(!1===a.isExpanded?"mdi-chevron-down":"mdi-chevron-up"),1)])),_:1})])]),c("span",Ua,g((l=a.total,new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(l))),1)]),v(w,{name:"slide"},{default:k((()=>[V(c("div",Ia,[c("div",Fa,[(p(!0),i(M,null,P(a.expenses,(a=>(p(),b(e,{key:a.id,expense:a,"read-only":!0},null,8,["expense"])))),128))])],512),[[B,!1!==a.isExpanded]])])),_:1})])):D("",!0);var l}}),[["__scopeId","data-v-929a7a53"]]),Aa=u({__name:"BudgetUngroupedView",props:{entries:{},referenceDate:{},monthExpenses:{},totalMonthExpenses:{},addExpensesToBudget:{type:Boolean},expandedGroups:{}},emits:["edit","toggleGroup","update:addExpensesToBudget"],setup:e=>(e,a)=>(p(),i("div",null,[(p(!0),i(M,null,P(e.entries,(a=>(p(),b(Ta,{key:a.id,entry:a,"reference-date":e.referenceDate,onEdit:t=>e.$emit("edit",a)},null,8,["entry","reference-date","onEdit"])))),128)),v(Ga,{expenses:e.monthExpenses,total:e.totalMonthExpenses,"add-expenses-to-budget":e.addExpensesToBudget,"is-expanded":e.expandedGroups["gastos-del-mes"],onToggleGroup:a[0]||(a[0]=a=>e.$emit("toggleGroup",a)),"onUpdate:addExpensesToBudget":a[1]||(a[1]=a=>e.$emit("update:addExpensesToBudget",a))},null,8,["expenses","total","add-expenses-to-budget","is-expanded"])]))}),Oa=["onClick"],$a={class:"budget-group__header-content"},Na={class:"budget-group__chevron"},Ra={class:"budget-group__total"},La=I(u({__name:"BudgetGroupedView",props:{groups:{},referenceDate:{},groupBy:{},monthExpenses:{},totalMonthExpenses:{},addExpensesToBudget:{type:Boolean},expandedGroups:{}},emits:["edit","toggleGroup","update:addExpensesToBudget"],setup(e){const a=e,t=e=>{if("date"===a.groupBy){const[a,t,l]=e.split("/"),s=new Date(parseInt(l),parseInt(t)-1,parseInt(a));return ne(s)}return e};return(e,a)=>(p(),i("div",null,[(p(!0),i(M,null,P(e.groups,(a=>{return p(),i(M,{key:a.label},[c("p",{class:"budget-group__header",onClick:t=>e.$emit("toggleGroup",a.label)},[c("span",$a,[c("span",null,g(t(a.label)),1),c("span",Na,[v(O,{size:"17"},{default:k((()=>[C(g(!1===e.expandedGroups[a.label]?"mdi-chevron-down":"mdi-chevron-up"),1)])),_:2},1024)])]),c("span",Ra,g((l=Math.abs(a.total),new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(l))),1)],8,Oa),v(w,{name:"slide"},{default:k((()=>[V(c("div",null,[(p(!0),i(M,null,P(a.entries,(a=>(p(),b(Ta,{key:a.id,entry:a,"reference-date":e.referenceDate,onEdit:t=>e.$emit("edit",a)},null,8,["entry","reference-date","onEdit"])))),128))],512),[[B,!1!==e.expandedGroups[a.label]]])])),_:2},1024)],64);var l})),128)),v(Ga,{expenses:e.monthExpenses,total:e.totalMonthExpenses,"add-expenses-to-budget":e.addExpensesToBudget,"is-expanded":e.expandedGroups["gastos-del-mes"],onToggleGroup:a[0]||(a[0]=a=>e.$emit("toggleGroup",a)),"onUpdate:addExpensesToBudget":a[1]||(a[1]=a=>e.$emit("update:addExpensesToBudget",a))},null,8,["expenses","total","add-expenses-to-budget","is-expanded"])]))}}),[["__scopeId","data-v-e4fbc0c0"]]),Ha={class:"budget-list"},za=I(u({__name:"BudgetList",props:{selectedDate:{default:void 0},filters:{default:()=>({search:"",groupBy:null,orderBy:null,initDate:null,endDate:null})}},setup(e){const a=e,t=l(),s=te(),o=T({}),n=m((()=>t.addExpensesToBudget)),r=e=>{t.addExpensesToBudget=e;const a=ae.getBudgetConfig();ae.saveBudgetConfig({...a,addExpensesToBudget:e}),N.queueBackup()};S((()=>{const e=ae.getBudgetConfig();e.expandedGroups&&Object.keys(e.expandedGroups).length>0&&(o.value={...e.expandedGroups}),void 0===o.value["gastos-del-mes"]&&(o.value["gastos-del-mes"]=!1)}));const{filteredAndSortedEntries:d}=Ca({selectedDate:m((()=>a.selectedDate||new Date)),search:m((()=>a.filters?.search||"")),initDate:m((()=>a.filters?.initDate||null)),endDate:m((()=>a.filters?.endDate||null))});Y((()=>a.selectedDate),(e=>{e&&(t.selectedDate=e)}),{immediate:!0});const u=e=>{const a=o.value[e];o.value[e]=!1===a,c()},c=()=>{const e=ae.getBudgetConfig();ae.saveBudgetConfig({...e,expandedGroups:{...o.value}}),N.queueBackup()},v=m((()=>{const e=[...d.value];if(a.filters?.orderBy)switch(a.filters.orderBy){case"newest":e.sort(((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()));break;case"oldest":e.sort(((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime()));break;case"highest":e.sort(((e,a)=>a.value-e.value));break;case"lowest":e.sort(((e,a)=>e.value-a.value))}return e})),g=(e,a)=>e.reduce(((e,l)=>{const s=t.getDisplayValue(l,a);return"ingreso"===l.type?e+s:e-s}),0),y=m((()=>{if(!a.filters?.groupBy||"none"===a.filters.groupBy)return null;const e={};return v.value.forEach((t=>{let l="";switch(a.filters.groupBy){case"type":l="ingreso"===t.type?"Ingresos":"Gastos";break;case"category":l=t.category?.name||"Sin categoría";break;case"date":l=G(t.date).format("DD/MM/YYYY");break;default:l="Otros"}e[l]||(e[l]=[]),e[l].push(t)})),Object.entries(e).map((([e,t])=>({label:e,entries:t,total:g(t,a.selectedDate||new Date)})))}));Y((()=>a.filters?.collapseAll),((e,a)=>{if(void 0===a)return;if(!y.value)return;const t=!e;y.value.forEach((e=>{o.value[e.label]=t})),o.value["gastos-del-mes"]=t,c()})),Y(y,(e=>{if(!e)return;const t=a.filters?.collapseAll;e.forEach((e=>{void 0===o.value[e.label]&&(o.value[e.label]=!t)}))}),{immediate:!0});const f=e=>{t.setSelectedEntry(e)},_=m((()=>{const e=G(a.selectedDate).startOf("month"),t=G(a.selectedDate).endOf("month"),l=a.filters?.search?.toLowerCase()||"";return s.expenses.filter((a=>{const s=G(a.date),o=s.isAfter(e)&&s.isBefore(t)||s.isSame(e,"day")||s.isSame(t,"day");if(!l)return o;const n=a.name.toLowerCase().includes(l);return o&&n}))})),h=m((()=>_.value.reduce(((e,a)=>e+a.value),0)));return(e,t)=>(p(),i("div",Ha,[0===v.value.length&&0===_.value.length?(p(),b(le,{key:0})):(p(),i(M,{key:1},[null===y.value?(p(),b(Aa,{key:0,entries:v.value,"reference-date":a.selectedDate||new Date,"month-expenses":_.value,"total-month-expenses":h.value,"add-expenses-to-budget":n.value,"expanded-groups":o.value,onEdit:f,onToggleGroup:u,"onUpdate:addExpensesToBudget":r},null,8,["entries","reference-date","month-expenses","total-month-expenses","add-expenses-to-budget","expanded-groups"])):(p(),b(La,{key:1,groups:y.value,"reference-date":a.selectedDate||new Date,"group-by":a.filters?.groupBy??null,"month-expenses":_.value,"total-month-expenses":h.value,"add-expenses-to-budget":n.value,"expanded-groups":o.value,onEdit:f,onToggleGroup:u,"onUpdate:addExpensesToBudget":r},null,8,["groups","reference-date","group-by","month-expenses","total-month-expenses","add-expenses-to-budget","expanded-groups"]))],64))]))}}),[["__scopeId","data-v-4bd536d6"]]),Za={class:"modification-dialog__description"},qa={class:"modification-options"},Ja={class:"option-content"},Ka={class:"option-desc"},Wa={class:"option-content"},Qa={class:"option-desc"},Xa=I(u({__name:"ModificationChoiceDialog",props:{entryName:{},referenceDate:{}},emits:["chosen","cancelled"],setup(e,{emit:a}){const t=e,l=a,s=T(!0),o=m((()=>{const e=G(t.referenceDate).locale("es"),a=e.format("MMMM"),l=e.format("YYYY");return`${a.charAt(0).toUpperCase()+a.slice(1)} ${l}`})),n=e=>{s.value=!1,l("chosen",e)},r=()=>{s.value=!1,l("cancelled")};return(e,a)=>(p(),b(R,{modelValue:s.value,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value=e),"max-width":"400",persistent:""},{default:k((()=>[v(L,{class:"modification-dialog"},{default:k((()=>[v(H,{class:"modification-dialog__title"},{default:k((()=>a[4]||(a[4]=[C("Aplicar cambios para")]))),_:1}),v(z,{class:"modification-dialog__content"},{default:k((()=>[c("p",Za,' ¿A qué periodo deseas aplicar los cambios en "'+g(e.entryName)+'"? ',1),c("div",qa,[v(A,{variant:"tonal",class:"option-btn",onClick:a[0]||(a[0]=e=>n("this")),block:""},{default:k((()=>[c("div",Ja,[a[5]||(a[5]=c("span",{class:"option-title"},"Este mes",-1)),c("span",Ka,g(o.value),1)])])),_:1}),v(A,{variant:"tonal",class:"option-btn",onClick:a[1]||(a[1]=e=>n("all")),block:""},{default:k((()=>a[6]||(a[6]=[c("div",{class:"option-content"},[c("span",{class:"option-title"},"Todos los meses"),c("span",{class:"option-desc"},"Pasados, presentes y futuros")],-1)]))),_:1}),v(A,{variant:"tonal",class:"option-btn",onClick:a[2]||(a[2]=e=>n("future")),block:""},{default:k((()=>[c("div",Wa,[a[7]||(a[7]=c("span",{class:"option-title"},"De este mes en adelante",-1)),c("span",Qa,g(o.value)+" y futuros",1)])])),_:1})])])),_:1}),v(Z,{class:"modification-dialog__actions"},{default:k((()=>[v(q),v(A,{class:"btn-label",onClick:r},{default:k((()=>a[8]||(a[8]=[C("Cancelar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]))}}),[["__scopeId","data-v-d4ebf79f"]]),et={class:"add-expense"},at={class:"add-expense__header"},tt={class:"add-expense__bar"},lt={class:"add-expense__input"},st={class:"add-expense__input add-expense__value"},ot={class:"add-expense__more"},nt={class:"d-flex align-center"},rt={class:"add-expense__toggles justify-space-between"},dt={class:"add-expense__toggles"},ut={class:"mt-4"},it={class:"add-expense__actions"},ct={key:0,class:"add-expense__delete"},pt=I(u({__name:"AddBudgetComplete",setup(e){const a=ie(),t=l(),s=ce(),o=oe(),n=T(),u=T(),x=T(!1),w=T(!1),V=T(!1),B=T(!1),M=T(!1),P=T(null),S=T(null);let I=null,F=null,O=null;const N=T(""),R=T({id:"",name:"",value:0,type:"gasto",isFixed:!1,isPaid:!1,repeat:void 0,comments:"",date:G(t.selectedDate).format("YYYY-MM-DD"),category:null}),L=()=>{R.value.type="gasto"===R.value.type?"ingreso":"gasto"},H=m((()=>!t.selectedEntry||!S.value?.isFixed&&!S.value?.repeat)),z=m({get:()=>R.value.isFixed,set:e=>{H.value&&(R.value.isFixed=e,e&&(R.value.repeat=void 0))}}),Z=m({get:()=>void 0!==R.value.repeat,set:e=>{H.value&&(R.value.repeat=e?1:void 0)}}),q=m((()=>0===R.value.value?"":R.value.value||0===R.value.value?R.value.value.toLocaleString("es-CO"):"")),ee=m((()=>0===R.value.repeat?"":R.value.repeat||0===R.value.repeat?R.value.repeat.toLocaleString("es-CO"):"")),ae=m((()=>s.categories)),te=e=>{const a=Number(e.replace(/[^\d]/g,""));R.value.value=isNaN(a)?0:a},le=e=>{const a=Number(e.replace(/[^\d]/g,""));R.value.repeat=isNaN(a)?0:a},ne=()=>{x.value=!1,R.value={id:"",name:"",value:0,type:"gasto",isFixed:!1,isPaid:!1,repeat:void 0,comments:"",date:G(t.selectedDate).format("YYYY-MM-DD"),category:null},S.value=null,t.setSelectedEntry(null),w.value=!1},de=()=>{""!==R.value.name.trim()&&n.value?.focus()},ue=e=>{const a=e.getUTCFullYear(),t=String(e.getUTCMonth()+1).padStart(2,"0"),l=String(e.getUTCDate()).padStart(2,"0");R.value.date=`${a}-${t}-${l}`},ve=m({get:()=>{if(!R.value.date)return new Date;const[e,a,t]=R.value.date.split("-");return new Date(Date.UTC(parseInt(e),parseInt(a)-1,parseInt(t)))},set:e=>{const a=e.getUTCFullYear(),t=String(e.getUTCMonth()+1).padStart(2,"0"),l=String(e.getUTCDate()).padStart(2,"0");R.value.date=`${a}-${t}-${l}`}}),ge=()=>{},ye=m((()=>!!S.value&&(R.value.name!==S.value.name||R.value.value!==S.value.value))),fe=m((()=>!!S.value&&R.value.isPaid!==S.value.isPaid)),_e=()=>{if(R.value.name&&R.value.value)try{const e={...R.value,category:R.value.category||null};if(t.selectedEntry&&fe.value&&t.updateEntryIsPaidForMonth(R.value.id,R.value.isPaid),t.selectedEntry&&ye.value&&(R.value.isFixed||R.value.repeat&&R.value.repeat>0))return void(M.value=!0);t.selectedEntry?(fe.value||t.updateEntry(e),a.success("Presupuesto editado")):(e.id=re(),t.addEntry(e),a.success("Presupuesto agregado")),ne()}catch(e){a.error(e.message)}},be=e=>{P.value=e,M.value=!1,R.value.name&&R.value.value&&ke(e)},he=()=>{P.value=null,M.value=!1},ke=e=>{const l={...R.value,category:R.value.category||null};fe.value&&t.updateEntryIsPaidForMonth(R.value.id,R.value.isPaid),t.updateEntryWithModification(l,e),a.success("Presupuesto editado"),ne()},xe=async()=>{const e=t.selectedEntry;if(!e)return void a.error("No hay presupuesto seleccionado");if(!e.id)return void a.error("Error: El presupuesto no tiene ID válido");if(await o({title:"Eliminar presupuesto",message:`Se eliminará el presupuesto ${e?.name} ¿Está seguro?`,confirmColor:"red"}))try{t.deleteEntry(e.id),a.success("Presupuesto eliminado"),ne()}catch(l){a.error("Error al eliminar el presupuesto")}},Ce=()=>{x.value=!0,setTimeout((()=>{u.value.focus()}),100)},De=(e=!1)=>{V.value=!0,e?(B.value=!0,O&&clearTimeout(O),O=setTimeout((()=>{Ee()}),1500)):O&&clearTimeout(O)},Ee=()=>{V.value=!1,O&&clearTimeout(O),I&&clearTimeout(I),I=setTimeout((()=>{B.value=!1}),300)},we=()=>{F&&clearTimeout(F),B.value&&Ee()},Ve=e=>{N.value=e.pointerType,"touch"===e.pointerType&&(F&&clearTimeout(F),F=setTimeout((()=>{De(!0)}),500))},Be=e=>{"mouse"===e.pointerType&&De(!1)},Me=e=>{"touch"===e.pointerType?we():"mouse"===e.pointerType&&Ee()},Pe=e=>{"mouse"===e.pointerType?Ee():"touch"===e.pointerType&&we()},Te=()=>{B.value?B.value=!1:(R.value.date=G(t.selectedDate).format("YYYY-MM-DD"),x.value=!0)};return Y((()=>t.selectedEntry),(e=>{e&&(x.value=!0,(()=>{if(t.selectedEntry){const e=t.selectedEntry;if(e){S.value=JSON.parse(JSON.stringify(e));const a=G(t.selectedDate).format("YYYY-MM"),l=e.modifications?.find((e=>e.month===a));l&&(void 0!==l.name&&(S.value.name=l.name),void 0!==l.value&&(S.value.value=l.value),void 0!==l.isPaid&&(S.value.isPaid=l.isPaid)),R.value.name=e.name,R.value.value=e.value,R.value.type=e.type,R.value.category=e.category||null,R.value.date=e.date,R.value.isFixed=e.isFixed,R.value.isPaid=e.isPaid,R.value.repeat=e.repeat,R.value.comments=e.comments||"",R.value.id=e.id||"",l&&(void 0!==l.name&&(R.value.name=l.name),void 0!==l.value&&(R.value.value=l.value),void 0!==l.isPaid&&(R.value.isPaid=l.isPaid))}}})())}),{deep:!0}),(e,a)=>(p(),i("div",{class:f(["add-expense__container",{"add-expense--focused":x.value}]),ref:"formContainer"},[x.value?(p(),i("div",{key:0,class:"add-expense__overlay",onClick:ne})):D("",!0),v(J,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),text:"Agregar presupuesto",location:"left","open-on-hover":!1,"open-on-focus":!1,"open-on-click":!1},{activator:k((({props:e})=>[v(A,_({color:y(d),class:"btn-fab fab-button add-expense__button",onClick:Te,onPointerdown:Ve,onPointerup:Me,onPointercancel:Me,onPointerleave:Pe,onPointerenter:Be},e),{default:k((()=>[v(me,{class:"icon"})])),_:2},1040,["color"])])),_:1},8,["modelValue"]),c("div",et,[c("div",at,[a[8]||(a[8]=c("div",{class:"subtitle"},"Agregar presupuesto",-1)),c("div",{class:f(["add-expense__pill",R.value.type]),onClick:L},g("gasto"===R.value.type?"Gasto":"Ingreso"),3)]),c("div",tt,[c("div",lt,[v(K,{ref_key:"descriptionInput",ref:u,modelValue:R.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value.name=e),density:"compact",label:"Descripción*","hide-details":"",type:"text",maxlength:"100",onKeydown:j(E(de,["prevent"]),["enter"]),onFocus:ge,class:"general-input",enterkeyhint:"next",readonly:!x.value,onClick:Ce},null,8,["modelValue","onKeydown","readonly"])]),c("div",st,[v(K,{ref_key:"valueInput",ref:n,class:"general-input",density:"compact",label:"Valor*","hide-details":"",prefix:"$","onUpdate:modelValue":te,"model-value":q.value,maxlength:"12",onKeyup:j(_e,["enter"]),onFocus:ge,pattern:"[0-9]*",enterkeyhint:"done"},null,8,["model-value"])])]),c("div",ot,[c("div",null,[v(X,{class:"general-input mt-3 mb-2",modelValue:R.value.category,"onUpdate:modelValue":a[2]||(a[2]=e=>R.value.category=e),items:ae.value,"item-title":"name","return-object":"",label:"Categoría",density:"comfortable","hide-details":""},{item:k((({props:e,item:a})=>[v(W,_(e,{title:void 0,"prepend-avatar":void 0}),{prepend:k((()=>[c("div",{class:"add-expense__cat",style:U({backgroundColor:a.raw.backgroundColor})},[(p(),b(h(y(se)(a.raw.category?.icon)),{color:y(r)},null,8,["color"]))],4)])),default:k((()=>[v(Q,null,{default:k((()=>[C(g(a.raw.name),1)])),_:2},1024)])),_:2},1040)])),selection:k((({item:e})=>[c("div",nt,[c("div",{class:"add-expense__cat",style:U({backgroundColor:e.raw.backgroundColor})},[(p(),b(h(y(se)(e.raw.category?.icon)),{color:y(r)},null,8,["color"]))],4),C(" "+g(e.raw.name),1)])])),_:1},8,["modelValue","items"])]),c("div",rt,[v($,{modelValue:R.value.isPaid,"onUpdate:modelValue":a[3]||(a[3]=e=>R.value.isPaid=e),label:"Pagado",inset:"",density:"compact","hide-details":"",color:R.value.isPaid?"success":void 0,class:"ma-0 pa-0 subtitle"},null,8,["modelValue","color"]),v(pe,{onOnChange:ue,modelValue:ve.value,"onUpdate:modelValue":a[4]||(a[4]=e=>ve.value=e)},null,8,["modelValue"])]),c("div",dt,[c("div",null,[v($,{modelValue:z.value,"onUpdate:modelValue":a[5]||(a[5]=e=>z.value=e),label:"Es fijo",inset:"",density:"compact","hide-details":"",color:z.value?"success":void 0,class:"ma-0 pa-0 subtitle",disabled:Z.value||!H.value},null,8,["modelValue","color","disabled"])]),v($,{modelValue:Z.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Z.value=e),label:"Se repite",inset:"",density:"compact","hide-details":"",color:Z.value?"success":void 0,class:"ma-0 pa-0 subtitle ms-7",disabled:z.value||!H.value},null,8,["modelValue","color","disabled"]),Z.value?(p(),b(K,{key:0,type:"text",label:"Meses",density:"compact","hide-details":"",class:"general-input repeat-input",pattern:"[0-9]*","model-value":ee.value,"onUpdate:modelValue":le,maxlength:"5"},null,8,["model-value"])):D("",!0)]),c("div",ut,[v(K,{class:"general-input mt-2",modelValue:R.value.comments,"onUpdate:modelValue":a[7]||(a[7]=e=>R.value.comments=e),label:"Comentarios",density:"compact",rows:"3","multi-line":"","hide-details":""},null,8,["modelValue"])])]),c("div",it,[v(A,{type:"button",class:"btn-neutro",onClick:ne},{default:k((()=>a[9]||(a[9]=[C("Cancelar")]))),_:1}),v(A,{type:"button",class:"btn-primary",onClick:_e,disabled:!R.value.name||!R.value.value},{default:k((()=>a[10]||(a[10]=[C(" Guardar ")]))),_:1},8,["disabled"])]),y(t).selectedEntry?(p(),i("div",ct,[c("p",{onClick:xe},"Eliminar Presupuesto")])):D("",!0)]),M.value?(p(),b(Xa,{key:1,"entry-name":R.value.name,"reference-date":y(t).selectedDate,onChosen:be,onCancelled:he},null,8,["entry-name","reference-date"])):D("",!0)],2))}}),[["__scopeId","data-v-3e47bc23"]]),mt={class:"side-drawer-body"},vt={class:"side-drawer-body__content"},gt={class:"d-flex align-center ga-2"},yt={class:"d-flex align-center ga-2 mb-3 mt-3"},ft={class:"side-drawer-body__actions"},_t={key:0,class:"add-budget__delete"},bt=I(u({__name:"AddBudgetSide",emits:["closeEditExpense"],setup(e,{expose:a,emit:t}){const s=l(),o=ce(),n=ie(),d=oe(),u=T(!1),x=T(!1),E=T(null),w=T(null),V=T({id:"",name:"",value:0,type:"gasto",isFixed:!1,isPaid:!1,repeat:void 0,comments:"",date:G(s.selectedDate).format("YYYY-MM-DD"),category:null});a({openDrawer:()=>{u.value=!0}});Y((()=>s.selectedEntry),(e=>{e&&((()=>{const e=s.selectedEntry;if(e){w.value=JSON.parse(JSON.stringify(e));const a=G(s.selectedDate).format("YYYY-MM"),t=e.modifications?.find((e=>e.month===a));t&&(void 0!==t.name&&(w.value.name=t.name),void 0!==t.value&&(w.value.value=t.value),void 0!==t.isPaid&&(w.value.isPaid=t.isPaid)),V.value.id=e.id,V.value.name=e.name,V.value.value=e.value,V.value.type=e.type,V.value.isFixed=e.isFixed,V.value.isPaid=e.isPaid,V.value.repeat=e.repeat,V.value.comments=e.comments||"",V.value.date=e.date,t&&(void 0!==t.name&&(V.value.name=t.name),void 0!==t.value&&(V.value.value=t.value),void 0!==t.isPaid&&(V.value.isPaid=t.isPaid)),e.category&&(V.value.category=e.category)}})(),u.value=!0)})),Y((()=>u.value),(e=>{e&&(s.selectedEntry||(V.value.date=G(s.selectedDate).format("YYYY-MM-DD")))}));const B=()=>{V.value.type="gasto"===V.value.type?"ingreso":"gasto"},M=m((()=>!s.selectedEntry||!w.value?.isFixed&&!w.value?.repeat)),P=m({get:()=>V.value.isFixed,set:e=>{M.value&&(V.value.isFixed=e,e&&(V.value.repeat=void 0))}}),S=m({get:()=>void 0!==V.value.repeat,set:e=>{M.value&&(V.value.repeat=e?1:void 0)}}),j=m((()=>0===V.value.value?"":V.value.value||0===V.value.value?V.value.value.toLocaleString("es-CO"):"")),U=m((()=>0===V.value.repeat?"":V.value.repeat||0===V.value.repeat?V.value.repeat.toLocaleString("es-CO"):"")),I=m((()=>o.categories)),F=m((()=>!!w.value&&(V.value.name!==w.value.name||V.value.value!==w.value.value))),O=m((()=>!!w.value&&V.value.isPaid!==w.value.isPaid)),N=e=>{const a=Number(e.replace(/[^\d]/g,""));V.value.value=isNaN(a)?0:a},R=e=>{const a=Number(e.replace(/[^\d]/g,""));V.value.repeat=isNaN(a)?0:a},L=e=>{const a=e.getUTCFullYear(),t=String(e.getUTCMonth()+1).padStart(2,"0"),l=String(e.getUTCDate()).padStart(2,"0");V.value.date=`${a}-${t}-${l}`},H=m({get:()=>{if(!V.value.date)return new Date;const[e,a,t]=V.value.date.split("-");return new Date(Date.UTC(parseInt(e),parseInt(a)-1,parseInt(t)))},set:e=>{const a=e.getUTCFullYear(),t=String(e.getUTCMonth()+1).padStart(2,"0"),l=String(e.getUTCDate()).padStart(2,"0");V.value.date=`${a}-${t}-${l}`}}),z=async()=>{if(V.value.name&&V.value.value)try{const e={...V.value,category:V.value.category||null};if(s.selectedEntry&&O.value&&s.updateEntryIsPaidForMonth(V.value.id,V.value.isPaid),s.selectedEntry&&F.value&&(V.value.isFixed||V.value.repeat&&V.value.repeat>0))return void(x.value=!0);s.selectedEntry?(O.value||s.updateEntry(e),n.success("Presupuesto editado")):(e.id=re(),s.addEntry(e),n.success("Presupuesto agregado")),le()}catch(e){n.error(e.message)}},Z=e=>{E.value=e,x.value=!1,V.value.name&&V.value.value&&ae(e)},J=()=>{E.value=null,x.value=!1},ae=e=>{O.value&&s.updateEntryIsPaidForMonth(V.value.id,V.value.isPaid);const a={...V.value,category:V.value.category||null};s.updateEntryWithModification(a,e),n.success("Presupuesto editado"),le()},te=async()=>{const e=s.selectedEntry;if(!e)return void n.error("No hay presupuesto seleccionado");if(!e.id)return void n.error("Error: El presupuesto no tiene ID válido");if(await d({title:"Eliminar presupuesto",message:`Se eliminará el presupuesto ${e?.name} ¿Está seguro?`,confirmColor:"red"}))try{s.deleteEntry(e.id),n.success("Presupuesto eliminado"),le()}catch(a){n.error("Error al eliminar el presupuesto")}},le=()=>{V.value={id:"",name:"",value:0,type:"gasto",isFixed:!1,isPaid:!1,repeat:void 0,comments:"",date:G(s.selectedDate).format("YYYY-MM-DD"),category:null},w.value=null,s.setSelectedEntry(null),u.value=!1};return(e,a)=>(p(),b(ve,{modelValue:u.value,"onUpdate:modelValue":[a[7]||(a[7]=e=>u.value=e),a[8]||(a[8]=e=>{e||le()})],title:"Agregar presupuesto",width:420,persistent:""},{default:k((()=>[c("div",mt,[c("div",vt,[c("div",{class:f(["add-budget__pill",V.value.type]),onClick:B},g("gasto"===V.value.type?"Gasto":"Ingreso"),3),v(K,{modelValue:V.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value.name=e),class:"general-input mb-5",density:"comfortable",label:"Descripción*","hide-details":"",type:"text",maxlength:"100"},null,8,["modelValue"]),v(K,{class:"general-input mb-5",density:"comfortable",label:"Valor*","hide-details":"",prefix:"$","onUpdate:modelValue":N,"model-value":j.value,maxlength:"12",pattern:"[0-9]*",inputmode:"numeric"},null,8,["model-value"]),v(X,{class:"general-input mb-5",modelValue:V.value.category,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value.category=e),items:I.value,"item-title":"name","return-object":"",label:"Categoría",density:"comfortable","hide-details":""},{item:k((({props:e,item:a})=>[v(W,_(e,{title:void 0,"prepend-avatar":void 0}),{prepend:k((()=>[v(ee,{size:"24",color:a.raw.backgroundColor},{default:k((()=>[(p(),b(h(y(se)(a.raw.category?.icon)),{color:y(r),size:"14"},null,8,["color"]))])),_:2},1032,["color"])])),default:k((()=>[v(Q,null,{default:k((()=>[C(g(a.raw.name),1)])),_:2},1024)])),_:2},1040)])),selection:k((({item:e})=>[c("div",gt,[v(ee,{size:"20",color:e.raw.backgroundColor},{default:k((()=>[(p(),b(h(y(se)(e.raw.category?.icon)),{color:y(r),size:"12"},null,8,["color"]))])),_:2},1032,["color"]),C(" "+g(e.raw.name),1)])])),_:1},8,["modelValue","items"]),v(pe,{onOnChange:L,modelValue:H.value,"onUpdate:modelValue":a[2]||(a[2]=e=>H.value=e)},null,8,["modelValue"]),v($,{modelValue:V.value.isPaid,"onUpdate:modelValue":a[3]||(a[3]=e=>V.value.isPaid=e),label:"Pagado",inset:"",density:"compact","hide-details":"",color:V.value.isPaid?"success":void 0,class:"ma-0 pa-0 mb-3 mt-4 subtitle"},null,8,["modelValue","color"]),c("div",yt,[v($,{modelValue:P.value,"onUpdate:modelValue":a[4]||(a[4]=e=>P.value=e),label:"Es fijo",inset:"",density:"compact","hide-details":"",color:P.value?"success":void 0,class:"ma-0 pa-0 subtitle",disabled:S.value||!M.value},null,8,["modelValue","color","disabled"]),v($,{modelValue:S.value,"onUpdate:modelValue":a[5]||(a[5]=e=>S.value=e),label:"Se repite",inset:"",density:"compact","hide-details":"",color:S.value?"success":void 0,class:"ma-0 pa-0 subtitle",disabled:P.value||!M.value},null,8,["modelValue","color","disabled"])]),S.value?(p(),b(K,{key:0,type:"text",label:"Meses",density:"compact","hide-details":"",class:"general-input mb-5",pattern:"[0-9]*","model-value":U.value,"onUpdate:modelValue":R,maxlength:"5",inputmode:"numeric"},null,8,["model-value"])):D("",!0),v(K,{class:"general-input mt-2",modelValue:V.value.comments,"onUpdate:modelValue":a[6]||(a[6]=e=>V.value.comments=e),label:"Comentarios",density:"comfortable",rows:"3","multi-line":"","hide-details":""},null,8,["modelValue"])]),c("div",ft,[v(q),v(A,{type:"button",class:"btn-neutro",onClick:le},{default:k((()=>a[9]||(a[9]=[C("Cancelar")]))),_:1}),v(A,{type:"button",class:"btn-primary",onClick:z,disabled:!V.value.name||!V.value.value},{default:k((()=>a[10]||(a[10]=[C(" Guardar ")]))),_:1},8,["disabled"])]),y(s).selectedEntry?(p(),i("div",_t,[c("p",{onClick:te},"Eliminar Presupuesto")])):D("",!0)]),x.value?(p(),b(Xa,{key:0,"entry-name":V.value.name,"reference-date":y(s).selectedDate,onChosen:Z,onCancelled:J},null,8,["entry-name","reference-date"])):D("",!0)])),_:1},8,["modelValue"]))}}),[["__scopeId","data-v-813fc35f"]]),ht={class:"home"},kt={class:"home__content"},xt={class:"home__header"},Ct={class:"home__selector"},Dt={class:"home__toggle"},Et={class:"home__body"},wt={class:"home__filter"},Vt={key:1,class:"home__add-btn"},Bt=I(u({__name:"HomeView",setup(e){const{mdAndUp:s}=ge(),o=T(new Date),n=T("budget"),r=T(),u=l(),g=()=>{u.setSelectedEntry(null),r.value&&r.value.openDrawer()},f=T({search:"",groupBy:"category",orderBy:null,initDate:null,endDate:null,collapseAll:!1}),{filteredAndSortedEntries:h}=Ca({selectedDate:o,search:m((()=>f.value.search)),initDate:m((()=>f.value.initDate)),endDate:m((()=>f.value.endDate))});S((()=>{const e=ae.getBudgetConfig();void 0!==e.groupBy&&(f.value.groupBy=e.groupBy),void 0!==e.orderBy&&(f.value.orderBy=e.orderBy),void 0!==e.collapseAll&&(f.value.collapseAll=e.collapseAll)})),Y((()=>f.value),(e=>{ae.saveBudgetConfig({groupBy:e.groupBy,orderBy:e.orderBy,collapseAll:e.collapseAll}),N.queueBackup()}),{deep:!0});const x=e=>{f.value={search:e.search,groupBy:e.groupBy,orderBy:e.orderBy,initDate:e.initDate||null,endDate:e.endDate||null,collapseAll:e.collapseAll||!1}};return(e,l)=>(p(),i(M,null,[c("div",ht,[v(ue,{title:"Mi presupuesto"}),c("div",kt,[c("div",xt,[c("div",Ct,[v(a,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e)},null,8,["modelValue"])]),c("div",Dt,[v(ya,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value=e)},null,8,["modelValue"])]),v(va,{"budget-toggle":n.value,"filtered-entries":y(h),"selected-date":o.value},null,8,["budget-toggle","filtered-entries","selected-date"])]),c("div",Et,[c("div",wt,[v(de,{"search-label":"Buscar","initial-group-by":f.value.groupBy,"initial-order-by":f.value.orderBy,"initial-collapse-all":f.value.collapseAll,onFilterChange:x,"hide-date-filter":""},null,8,["initial-group-by","initial-order-by","initial-collapse-all"]),y(s)?D("",!0):(p(),b(pt,{key:0})),y(s)?(p(),i("div",Vt,[v(J,{text:"Agregar presupuesto",location:"left"},{activator:k((({props:e})=>[v(A,_({color:y(d),class:"btn-fab fab-button",onClick:g},e),{default:k((()=>[v(me,{class:"icon"})])),_:2},1040,["color"])])),_:1})])):D("",!0)]),v(za,{"selected-date":o.value,filters:f.value},null,8,["selected-date","filters"])])]),y(s)?(p(),b(bt,{key:0,ref_key:"addBudgetSideRef",ref:r},null,512)):D("",!0)]),v(t)],64))}}),[["__scopeId","data-v-1fe1762a"]]);export{Bt as default};
