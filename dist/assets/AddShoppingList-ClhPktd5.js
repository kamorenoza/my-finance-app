import{_ as e,A as a}from"./SideDrawer.vue_vue_type_style_index_0_lang-CbuBtalK.js";import{useShoppingStore as l}from"./shopping.store-B2-i-A-2.js";import{g as o}from"./utils-CfCBEYwL.js";import{u as s}from"./toast.store-D86bTs2s.js";import{e as t}from"./variables.styles-BivaIJLK.js";import{t as n,V as u,u as i,s as r,k as d,_ as p}from"./index-kUCeoXe8.js";import{e as m,b as c,E as v,J as _,aa as f,z as b,K as y,A as h,u as T,H as g,_ as V,G as w}from"./vue-vendor-DpnofNfo.js";const j={class:"add-shopping"},k={class:"side-drawer-body"},x={class:"side-drawer-body__content"},L={class:"side-drawer-body__actions"},A=p(m({__name:"AddShoppingList",props:{showFab:{type:Boolean,default:!0}},setup(p,{expose:m}){const A=l(),D=s(),P=c(!1),C=c(!1),S=c(null),Y=c(!1),E=c(!1);let I=null,U=null,z=null;const F=c({name:""}),G=(e=!1)=>{Y.value=!0,e?(E.value=!0,z&&clearTimeout(z),z=setTimeout((()=>{M()}),1500)):z&&clearTimeout(z)},M=()=>{Y.value=!1,z&&clearTimeout(z),I&&clearTimeout(I),I=setTimeout((()=>{E.value=!1}),300)},N=()=>{U&&clearTimeout(U),E.value&&M()},B=e=>{"touch"===e.pointerType&&(U&&clearTimeout(U),U=setTimeout((()=>{G(!0)}),500))},H=e=>{"mouse"===e.pointerType&&G(!1)},J=e=>{"touch"===e.pointerType?N():"mouse"===e.pointerType&&M()},K=e=>{"mouse"===e.pointerType?M():"touch"===e.pointerType&&N()},q=()=>{E.value?E.value=!1:(Q(),C.value=!1,P.value=!0)},O=()=>{P.value=!1,Q()},Q=()=>{F.value={name:""},S.value=null,C.value=!1},R=()=>{if(F.value.name){if(C.value&&S.value){const e=A.shoppingLists.find((e=>e.id===S.value));e&&(A.updateShoppingList({...e,name:F.value.name}),D.success("Lista actualizada"))}else{const e={id:o(),name:F.value.name,createdDate:d().format("YYYY-MM-DD"),converted:!1,expenseId:null,items:[]};A.addShoppingList(e),D.success("Lista creada")}O()}else D.error("Ingresa un nombre para la lista")};return m({openEditDialog:e=>{F.value={name:e.name},S.value=e.id,C.value=!0,P.value=!0}}),(l,o)=>(w(),v("div",j,[l.showFab?(w(),_(n,{key:0,modelValue:Y.value,"onUpdate:modelValue":o[0]||(o[0]=e=>Y.value=e),text:"Agregar lista",location:"left","open-on-hover":!1,"open-on-focus":!1,"open-on-click":!1},{activator:y((({props:e})=>[b(u,h({color:T(t),class:"btn-fab fab-button add-shopping__fab",onClick:q,onPointerdown:B,onPointerup:J,onPointercancel:J,onPointerleave:K,onPointerenter:H},e),{default:y((()=>[b(a,{class:"icon"})])),_:2},1040,["color"])])),_:1},8,["modelValue"])):f("",!0),b(e,{modelValue:P.value,"onUpdate:modelValue":[o[2]||(o[2]=e=>P.value=e),o[3]||(o[3]=e=>{e||O()})],title:C.value?"Editar lista":"Nueva lista de compras",width:380,persistent:""},{default:y((()=>[g("div",k,[g("div",x,[b(i,{modelValue:F.value.name,"onUpdate:modelValue":o[1]||(o[1]=e=>F.value.name=e),label:"Nombre de la lista*",density:"comfortable","hide-details":"",class:"general-input mb-4"},null,8,["modelValue"])]),g("div",L,[b(r),b(u,{class:"btn-neutro",onClick:O},{default:y((()=>o[4]||(o[4]=[V("Cancelar")]))),_:1}),b(u,{class:"btn-primary",onClick:R,disabled:!F.value.name},{default:y((()=>o[5]||(o[5]=[V(" Guardar ")]))),_:1},8,["disabled"])])])])),_:1},8,["modelValue","title"])]))}}),[["__scopeId","data-v-633628ca"]]);export{A};
