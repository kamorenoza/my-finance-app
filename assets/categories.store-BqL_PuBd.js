import{D as e}from"./vue-vendor-CQiCTXSV.js";import{g as t}from"./utils-alPBo_3K.js";import{m as o}from"./index-B8_2VSAt.js";import"./firebase-vendor-B7qOPrSY.js";import"./vuetify-vendor-D6hAMkrv.js";const a=()=>{const e=localStorage.getItem("user"),t=e?JSON.parse(e):null;return t?t.email:null},r={loadCategories:()=>{const e=a();if(!e)return[];const t=localStorage.getItem(`categories_${e}`);return t?JSON.parse(t):[]},addCategory:e=>{const t=a();if(!t)return;const o=r.loadCategories();if(o.some((t=>t.name===e.name)))throw new Error("La categoría ya existe");o.push(e),localStorage.setItem(`categories_${t}`,JSON.stringify(o))},updateCategory:e=>{const t=a();if(!t)return;const o=r.loadCategories().map((t=>t.id===e.id?e:t));localStorage.setItem(`categories_${t}`,JSON.stringify(o))},deleteCategory:e=>{const t=a();if(!t)return;let o=r.loadCategories();o=o.filter((t=>t.id!==e.id)),localStorage.setItem(`categories_${t}`,JSON.stringify(o))}},s=e("category",{state:()=>({categories:r.loadCategories()}),actions:{loadCategories(){this.categories=r.loadCategories()},addCategory(e){if(this.categories.some((t=>t.name.trim().toLowerCase()===e.name.trim().toLowerCase())))throw new Error("La categoría ya existe");const a={...e,id:t()};r.addCategory(a),this.loadCategories(),o.queueBackup()},deleteCategory(e){r.deleteCategory(e),this.loadCategories(),o.queueBackup()},updateCategory(e){r.updateCategory(e),this.loadCategories(),o.queueBackup()}}});export{s as useCategoryStore};
