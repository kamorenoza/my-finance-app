import{D as e,b as s}from"./vue-vendor-CQiCTXSV.js";import{g as n}from"./utils-alPBo_3K.js";import{m as t}from"./index-B8_2VSAt.js";import{c as a}from"./config.service-BNV0N1DJ.js";import"./firebase-vendor-B7qOPrSY.js";import"./vuetify-vendor-D6hAMkrv.js";const o=()=>{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null;return s?s.email:null},u={loadExpenses:()=>{const e=o();if(!e)return[];const s=localStorage.getItem(`expenses_${e}`);return s?JSON.parse(s):[]},addExpense:e=>{const s=o();if(!s)return;const n=u.loadExpenses();n.push(e),localStorage.setItem(`expenses_${s}`,JSON.stringify(n))},updateExpense:e=>{const s=o();if(!s)return;const n=u.loadExpenses().map((s=>s.id===e.id?e:s));localStorage.setItem(`expenses_${s}`,JSON.stringify(n))},deleteExpense:e=>{const s=o();if(!s)return;let n=u.loadExpenses();n=n.filter((s=>s.id!==e)),localStorage.setItem(`expenses_${s}`,JSON.stringify(n))}},p=e("expenses",(()=>{const e=s(u.loadExpenses()),o=s(a.getExpensesConfig());return{expenses:e,filterConfig:o,loadExpenses:()=>{e.value=u.loadExpenses()},addExpense:s=>{const a={...s,id:n(),date:s.date||new Date};u.addExpense(a),e.value.push(a),t.queueBackup()},updateExpense:s=>{const n=e.value.findIndex((e=>e.id===s.id));-1!==n&&(e.value[n]=s,u.updateExpense(s),t.queueBackup())},deleteExpense:s=>{const n=e.value.findIndex((e=>e.id===s));-1!==n&&(e.value.splice(n,1),u.deleteExpense(s),t.queueBackup())},updateExpenseAccount:(s,n)=>{const a=e.value.find((e=>e.id===s));a&&(a.account=n,u.updateExpense(a),t.queueBackup())},onAccountUpdate:(s,n)=>{e.value.forEach((e=>{e.account?.id===s&&(e.account.name=n,u.updateExpense(e))})),t.queueBackup()},onAccountDelete:s=>{e.value.forEach((e=>{e.account?.id===s&&(e.account=null,u.updateExpense(e))})),t.queueBackup()},setFilterConfiguration:(e,s)=>{o.value={groupBy:e,orderBy:s},a.saveExpensesConfig({groupBy:e,orderBy:s}),t.queueBackup()}}}));export{p as useExpensesStore};
