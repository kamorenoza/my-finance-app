import{e,c as a,E as o,H as l,ad as r,J as s,V as t,u as c,W as n,z as i,G as u,b as d,j as g,F as C,aa as v,K as _,ab as m,ac as y,_ as f,af as p,l as b,N as k}from"./vue-vendor-DpnofNfo.js";import{g as w,D as j,c as h,a as E,T as V}from"./TooltipFabButton-jRJhWymC.js";import{_ as x,a as S}from"./Trash.icon.vue_vue_type_script_setup_true_lang-DS7Wic85.js";import{a as I,t as D,b as M,f as F,e as G}from"./variables.styles-BivaIJLK.js";import{_ as H,V as L,o as R,u as A,a as B}from"./index-Cv6rvNbY.js";import{useCategoryStore as T}from"./categories.store-C8ryR5eZ.js";import{C as K}from"./Check.icon-Dnf6m4SY.js";import{C as N}from"./Close.icon-_5RqL93A.js";import{u as U}from"./useConfirm-C6TtCBbS.js";import{u as Z}from"./toast.store-D86bTs2s.js";import{A as q,_ as z}from"./SideDrawer.vue_vue_type_style_index_0_lang-Dq4L_Muu.js";const J={class:"category-item"},O={class:"category-item__name"},W={class:"category-item__actions"},$=H(e({__name:"CategoryItem",props:{category:{}},emits:["edit","delete"],setup(e,{emit:d}){const g=[{label:"Editar",id:1,icon:x},{label:"Eliminar",id:2,icon:S}],C=e,v=d,_=a((()=>w(C.category.icon))),m=e=>{1===e?v("edit",C.category):2===e&&v("delete",C.category)};return(e,a)=>(u(),o("div",J,[l("div",{class:"category-item__icon",style:r({backgroundColor:e.category.backgroundColor})},[(u(),s(t(_.value),{color:c(I)},null,8,["color"]))],4),l("div",O,n(e.category.name),1),l("div",W,[i(j,{items:g,onOnMenuClicked:m})])]))}}),[["__scopeId","data-v-7db4db4c"]]),P={key:0,class:"icon-color__modal"},Q={class:"icon-color__grid"},X={class:"icon-color__grid"},Y={class:"mt-4 d-flex align-items-center justify-end"},ee=H(e({__name:"IconColorSelector",props:{icon:{},backgroundColor:{}},emits:["done"],setup(e,{emit:n}){const p=n,b=e,k=d(!1),j=d(E),V=d(b.backgroundColor),x=d("#ffffff"),S=d(b.icon),M=a((()=>S.value?w(S.value):w("cat1")));g((()=>[b.icon,b.backgroundColor,"#ffffff"]),(([e,a,o])=>{S.value=e,V.value=a,x.value=o}));const F=()=>{k.value=!k.value},G=()=>{k.value=!1,p("done",{icon:S.value,backgroundColor:V.value,iconColor:x.value})},H=()=>{k.value=!1};return(e,a)=>(u(),o(C,null,[i(L,{icon:"",class:"icon-color__button",style:r({backgroundColor:V.value,borderRadius:"50%"}),onClick:F},{default:_((()=>[(u(),s(t(M.value),{color:c(I)},null,8,["color"]))])),_:1},8,["style"]),k.value?(u(),o("div",P,[i(R,{class:"icon-color__card"},{default:_((()=>[a[2]||(a[2]=l("p",{class:"title"},"Seleccione el icono",-1)),l("div",Q,[(u(!0),o(C,null,m(j.value,(e=>(u(),s(L,{key:e.key,class:y(["icon-color__icon",{"icon-color__selected":e.key===S.value}]),onClick:a=>{return o=e.key,void(S.value=o);var o}},{default:_((()=>[(u(),s(t(e.icon),{class:"icon",color:c(D)},null,8,["color"]))])),_:2},1032,["class","onClick"])))),128))]),a[3]||(a[3]=l("p",{class:"title mb-2 mt-5"},"Seleccione el color",-1)),l("div",X,[(u(!0),o(C,null,m(c(h),(e=>(u(),s(L,{class:"icon-color__color",style:r({background:e}),onClick:a=>(e=>{V.value=e})(e)},null,8,["style","onClick"])))),256))]),l("div",Y,[i(L,{onClick:H,class:"btn-label"},{default:_((()=>a[0]||(a[0]=[f("Cerrar")]))),_:1}),i(L,{onClick:G,class:"btn-label icon-color__submit",disabled:!S.value||!V.value},{default:_((()=>a[1]||(a[1]=[f(" Aceptar ")]))),_:1},8,["disabled"])])])),_:1})])):v("",!0)],64))}}),[["__scopeId","data-v-8a11dc6f"]]),ae={class:"category-item"},oe={key:0,class:"category-item__header"},le={class:"category-item__bar"},re=H(e({__name:"NewCategory",props:{saveCategory:{type:Function},cancelEdit:{type:Function},newCategory:{},isEditing:{type:Boolean}},setup(e){const a=e,r=d(a.newCategory.icon||"cat1"),s=d(a.newCategory.backgroundColor||M),t=d(a.newCategory||{name:"",icon:"cat1",iconColor:"#ffffff",backgroundColor:M}),n=()=>{t.value.name?.trim()&&a.saveCategory(t?.value)},g=e=>{t.value.icon=e.icon,t.value.iconColor=e.iconColor,t.value.backgroundColor=e.backgroundColor},C=()=>{a.cancelEdit()};return(e,a)=>(u(),o("div",ae,[e.isEditing?v("",!0):(u(),o("div",oe,[a[1]||(a[1]=l("p",null,"Agregar categoría",-1)),i(L,{onClick:C,class:"btn-label category-item__close"},{default:_((()=>[i(N)])),_:1})])),l("div",le,[i(ee,{icon:r.value,backgroundColor:s.value,onDone:g},null,8,["icon","backgroundColor"]),i(A,{modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.name=e),dense:"",class:"general-input",placeholder:"Categoria",maxlength:100,onKeydown:[p(n,["enter"]),p(C,["escape"])]},null,8,["modelValue"]),i(L,{onClick:n,class:"btn-fab category-item__check",disabled:!t.value.name},{default:_((()=>[i(K,{color:c(F)},null,8,["color"])])),_:1},8,["disabled"])])]))}}),[["__scopeId","data-v-ed067b9c"]]),se={class:"category-drawer"},te={class:"category-drawer__header"},ce={class:"category-drawer__back"},ne={class:"category-drawer__list"},ie=H(e({__name:"CategoryDrawer",emits:["close"],setup(e,{emit:a}){const r=a,t=T(),n=U(),g=Z(),y=d(null),p=d(null);b((async()=>{t.loadCategories()}));const w=()=>{p.value=null,y.value={name:"",icon:"cat1",iconColor:"#ffffff",backgroundColor:M}},j=()=>{y.value=null},h=()=>{if(y.value)try{t.addCategory(y.value),t.loadCategories(),y.value=null,g.success("Categoría agregada")}catch(e){g.error(e.message)}},E=()=>{p.value&&(t.updateCategory(p.value),t.loadCategories(),p.value=null,g.success("Categoría editada"))},V=()=>{p.value=null},x=e=>{y.value=null,p.value=e},S=async e=>{await n({title:"Eliminar categoría",message:`Se eliminará la categoría <strong>${e.name}</strong>, ¿Está seguro?`,confirmColor:"red"})&&(t.deleteCategory(e),g.success("Categoría eliminada"))},I=()=>{r("close")};return(e,a)=>(u(),o("div",se,[l("div",te,[l("div",ce,[i(L,{class:"category-drawer__back-button",onClick:I,ripple:!1},{default:_((()=>[i(B,{left:""},{default:_((()=>a[0]||(a[0]=[f("mdi-arrow-left")]))),_:1})])),_:1})]),a[1]||(a[1]=l("h2",{class:"category-drawer__title"},"Categorías",-1)),l("div",null,[i(L,{class:"btn-fab fab-button",color:c(G),onClick:w},{default:_((()=>[i(q,{class:"icon"})])),_:1},8,["color"])])]),y.value?(u(),s(re,{key:0,newCategory:y.value,saveCategory:h,cancelEdit:j,class:"mt-6"},null,8,["newCategory"])):v("",!0),l("div",ne,[(u(!0),o(C,null,m(c(t).categories,(e=>(u(),o(C,null,[i(k,{name:"category",tag:"div",class:"category-list"},{default:_((()=>[p.value?.name!==e.name?(u(),s($,{key:e.name,category:e,onEdit:x,onDelete:S},null,8,["category"])):v("",!0)])),_:2},1024),p.value&&p.value?.name===e.name?(u(),s(re,{key:0,isEditing:!0,newCategory:p.value,saveCategory:E,cancelEdit:V,class:"mb-3"},null,8,["newCategory"])):v("",!0)],64)))),256))]),a[2]||(a[2]=l("div",{class:"text-center"},null,-1))]))}}),[["__scopeId","data-v-67721d09"]]),ue={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"icon"},de={id:"SVGRepo_iconCarrier"},ge=["stroke"],Ce=e({__name:"Categories.icon",props:{color:{default:()=>M}},setup:e=>(e,a)=>(u(),o("svg",ue,[a[0]||(a[0]=l("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1)),a[1]||(a[1]=l("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),l("g",de,[l("path",{d:"M8.5 3H11.5118C12.2455 3 12.6124 3 12.9577 3.08289C13.2638 3.15638 13.5564 3.27759 13.8249 3.44208C14.1276 3.6276 14.387 3.88703 14.9059 4.40589L20.5 10M7.5498 10.0498H7.5598M9.51178 6H8.3C6.61984 6 5.77976 6 5.13803 6.32698C4.57354 6.6146 4.1146 7.07354 3.82698 7.63803C3.5 8.27976 3.5 9.11984 3.5 10.8V12.0118C3.5 12.7455 3.5 13.1124 3.58289 13.4577C3.65638 13.7638 3.77759 14.0564 3.94208 14.3249C4.1276 14.6276 4.38703 14.887 4.90589 15.4059L8.10589 18.6059C9.29394 19.7939 9.88796 20.388 10.5729 20.6105C11.1755 20.8063 11.8245 20.8063 12.4271 20.6105C13.112 20.388 13.7061 19.7939 14.8941 18.6059L16.1059 17.3941C17.2939 16.2061 17.888 15.612 18.1105 14.9271C18.3063 14.3245 18.3063 13.6755 18.1105 13.0729C17.888 12.388 17.2939 11.7939 16.1059 10.6059L12.9059 7.40589C12.387 6.88703 12.1276 6.6276 11.8249 6.44208C11.5564 6.27759 11.2638 6.15638 10.9577 6.08289C10.6124 6 10.2455 6 9.51178 6ZM8.0498 10.0498C8.0498 10.3259 7.82595 10.5498 7.5498 10.5498C7.27366 10.5498 7.0498 10.3259 7.0498 10.0498C7.0498 9.77366 7.27366 9.5498 7.5498 9.5498C7.82595 9.5498 8.0498 9.77366 8.0498 10.0498Z",stroke:e.color,"stroke-width":"0.72","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ge)])]))}),ve={class:"fab-categories"},_e=H(e({__name:"CategoryManager",setup(e){const a=d(!1),r=()=>{a.value=!0};return(e,s)=>(u(),o(C,null,[l("div",ve,[i(V,{tooltip:"Categorias",color:c(G),onClick:r,"button-class":"has-label"},{icon:_((()=>[i(Ce),s[4]||(s[4]=l("span",{class:"fab-label"},"Categorías",-1))])),_:1},8,["color"])]),i(z,{modelValue:a.value,"onUpdate:modelValue":[s[2]||(s[2]=e=>a.value=e),s[3]||(s[3]=e=>{e||(a.value=!1)})],width:380},{default:_((()=>[i(ie,{onDone:s[0]||(s[0]=e=>a.value=!1),onClose:s[1]||(s[1]=e=>a.value=!1)})])),_:1},8,["modelValue"])],64))}}),[["__scopeId","data-v-d967be30"]]);export{_e as C};
